function Nitrogen(o){if(o.id){this.id=o.id}else{this.id="o"+Math.floor(Math.random()*999999999)}eval(Nitrogen.$NString+"."+this.id+" = this;");if(o.url){this.$url=o.url}else{this.$url=document.location.href}if(o.div){this.$div=o.div}else{this.$div=document}this.$dom_state="";this.$comet_is_running=false;this.$simulateSlowConnection=false;this.$simulateDelay=0}var N=Nitrogen;N.$NString="Nitrogen";N.$current_id="";N.$current_path="";N.$event_queue=new Array();N.$event_is_running=false;$.event.special.destroyed={remove:function(a){if(a.handler){a.handler()}}};function obj(a){return Nitrogen.obj(a)}function is_obj_existing(a){return Nitrogen.is_obj_existing(a)}N.Page=function(a){var b=new Nitrogen(a);b.$do_event=b.$do_xhr_event;b.$do_comet=b.$do_xhr_comet;return b};N.Inline=function(b){var c=new Nitrogen(b);if(b.windex){c.$do_event=c.$do_windex_event;c.$do_comet=c.$do_windex_comet;c.$url=Nitrogen.$add_param(c.$url,"windex","true")}else{c.$do_event=c.$do_xhr_event;c.$do_comet=c.$do_xhr_comet}var a=Nitrogen.$add_param(c.$url,"object_id",c.id);Nitrogen.$load_script(a);return c};N.$lookup=function(id){return eval(Nitrogen.$NString+"."+id+";")};N.$set_dom_state=function(a){var b=Nitrogen.$lookup(Nitrogen.$current_id);b.$set_dom_state(a)};N.prototype.$set_dom_state=function(a){this.$dom_state=a};N.$get_dom_state=function(){var a=Nitrogen.$lookup(Nitrogen.$current_id);return a.$get_dom_state()};N.prototype.$get_dom_state=function(){return this.$dom_state};N.prototype.$urlencode=function(a){return encodeURIComponent(a).replace(/%20/g,"+").replace(/\*/g,"%2A")};N.$queue_event=function(b,a,d){var c=Nitrogen.$lookup(Nitrogen.$current_id);c.$queue_event(b,a,d)};N.prototype.$queue_event=function(b,a,c){Nitrogen.$event_queue.push({n:this,triggerID:this.obj(b).id,postbackInfo:a,extraParams:c})};N.$event_loop=function(){setTimeout(Nitrogen.$NString+".$event_loop();",1);if(Nitrogen.$event_is_running){return}if(Nitrogen.$event_queue.length==0){return}else{var a=Nitrogen.$event_queue.shift();a.n.$do_event(a.triggerID,a.postbackInfo,a.extraParams)}};N.$return_false=function(b,a){return false};N.$is_enter_key=function(a){return(a&&(a.keyCode==13||a.keyCode==9))};N.$go_next=function(a){var b=Nitrogen.obj(a);if(b.focus){b.focus()}if(b.select){b.select()}if(b.click){b.click()}};N.$disable_selection=function(a){a.onselectstart=function(){return false};a.onmousedown=function(){return false};a.unselectable="on";a.style.MozUserSelect="none";a.style.cursor="default";a.style.WebkitTouchCallout="none";a.style.UserSelect="none";a.style.WebkitUserSelect="none";a.style.MsUserSelect="none"};N.$set_value=function(c,e){if(!c.id){c=obj(c)}var b=c.tagName;var d=c.type;var a=["INPUT","TEXTAREA"];if(b&&jQuery.inArray(b.toUpperCase(),a)>-1){e=Nitrogen.$decodeHTML(e)}if(b&&d&&(b.match(/^INPUT$/i)&&(d.match(/^CHECKBOX$/i)||d.match(/^RADIO$/i)))){c.checked=((e=="on"||e=="true"||e===true)?"checked":"")}else{if(c.value!==undefined){c.value=e}else{this.$update(c,e)}}};N.$encodeHTML=function(a){if(a==""||a==undefined){return""}return $("<pre/>").text(a).html()};N.$decodeHTML=function(a){if(a==""||a==undefined){return""}return $("<textarea/>").html(a).val()};N.$add_param=function(a,b,d){var c="";if(b){c=b}if(b&&d){c=b+"="+d}var e=a.split("?");if(e.length==1){return a+"?"+c}if(e.length>1){return a+"&"+c}};N.$load_script=function(b){var c=document.getElementsByTagName("head")[0];var a=document.createElement("script");a.type="text/javascript";a.src=b;c.appendChild(a)};N.$check_include_files=function(e){var b;var d;var c;var a=$.map(e,function(h,g){c=window.location.origin+h;if(h.match(/\.js$/)){b=document.scripts;d="src"}else{b=document.styleSheets;d="href"}var f=function(){for(var i=0;i<b.length;i++){if(c==b[i][d]){return true}}return false};if(f()){return null}else{return h}});if(a.length!=0){console.log("Not Found :"+a+". Please check element require js, css files.")}};N.$binsearch=function(g,c){if(typeof(g)==="undefined"||!g.length){return false}var d=g.length-1;var b=0;var a;var f;while(b<=d){mid=parseInt((b+d)/2);var e=g[mid];if(e.constructor===Array){a=e[0];f=e[1]}else{a=e;f=e}if(c<a){d=mid-1}else{if(c>f){b=mid+1}else{return true}}}return false};N.prototype.$validate_and_serialize=function(e){var c="";var a=true;var d=this.$get_elements_to_serialize();for(var b=0;b<d.length;b++){element=d[b];if(element.validator&&(jQuery.inArray(e,element.validator.triggers)>-1)&&!element.validator.validate()){a=false}else{if(element.type=="radio"){c+="&"+element.id+"="+element.checked}if(element.tagName=="INPUT"&&element.type=="file"){c+="&"+encodeURIComponent(element.name)+"="+encodeURIComponent(element.value)}else{c+="&"+jQuery(element).serialize()}}}if(a){return c}else{return null}};N.clearValidationMessage=function(){var c=Nitrogen.$lookup(Nitrogen.$current_id);var b=c.$get_elements_to_serialize();for(var a=0;a<b.length;a++){element=b[a];if(element.validator){element.validator.removeMessageAndFieldClass()}}};N.clearValidationMessageWithId=function(b){var a=$(b).find("*").each(function(c,d){if(d.validator){d.validator.removeMessageAndFieldClass()}})};N.$createValidator=function(a,e,d,h,g,c,f){var b=obj("me").validator;if(!b){b=new LiveValidation(obj("me"),{validMessage:a,onlyOnBlur:e,onlyOnSubmit:d,insertAfterWhatNode:h,displayMode:f,onInvalid:function(){c();if(this.displayMode=="original"){this.insertMessage(this.createMessageSpan())}else{if(this.displayMode=="tooltip"){this.insertTooltip()}}this.addFieldClass()}});b.triggers=[]}if(!obj(g)){throw"undefined validation trigger id "+g}b.triggers.push(obj(g).id);obj("me").validator=b;return b};N.prototype.$do_xhr_event=function(triggerID,postbackInfo,extraParams){Nitrogen.$event_is_running=true;var s=this.$validate_and_serialize(triggerID);if(s==null){Nitrogen.$event_is_running=false;return}var params="domState="+this.$dom_state+"&postbackInfo="+postbackInfo+"&"+s+"&"+extraParams;var target=jQuery("#"+triggerID);var preload=target.is("a")||target.is(":button");if(preload){jQuery("body").addClass("disable-during-postback");jQuery(document).on("keydown",function(objEvent){objEvent.preventDefault();return false});var akEls=document.querySelectorAll("[accesskey]");Array.prototype.forEach.call(akEls,function(el,i){el.setAttribute("data-disable-accesskey",el.getAttribute("accesskey"));el.removeAttribute("accesskey")})}var url=this.$url;var post=function(){jQuery.ajax({url:url,type:"post",data:params,dataType:"text",success:function(data,textStatus){if(preload){jQuery("body").removeClass("disable-during-postback");jQuery(document).off("keydown");var akEls=document.querySelectorAll("[data-disable-accesskey]");Array.prototype.forEach.call(akEls,function(el,i){el.setAttribute("accesskey",el.getAttribute("data-disable-accesskey"));el.removeAttribute("data-disable-accesskey")})}Nitrogen.$event_is_running=false;eval(data)},error:function(xmlHttpRequest,textStatus,errorThrown){if(preload){jQuery("body").removeClass("disable-during-postback");jQuery(document).off("keydown");var akEls=document.querySelectorAll("[data-disable-accesskey]");Array.prototype.forEach.call(akEls,function(el,i){el.setAttribute("accesskey",el.getAttribute("data-disable-accesskey"));el.removeAttribute("data-disable-accesskey")})}Nitrogen.$event_is_running=false;eval(xmlHttpRequest.responseText)}})};if(preload&&N.$simulateSlowConnection&&N.$simulateDelay>0){target.oneTime(N.$simulateDelay,post)}else{post()}};N.$register_spinner=function(a,b){$.each(b,function(c,d){query_to_hash=function(g){var e,f;f=g.replace(/\?/,"").split("&");e={};$.each(f,function(j,h){h=h.split("=");return e[h[0]]=decodeURIComponent(h[1])});return e};$(document).ajaxSend(function(f,g,e){if(a==query_to_hash(e.data).postbackInfo||a=="all"){if($("#"+d+"").length){$("#"+d+"").show()}}});$(document).ajaxComplete(function(f,g,e){if(a==query_to_hash(e.data).postbackInfo||a=="all"){if($("#"+d+"").length){$("#"+d+"").hide()}}})})};N.$comet_start=function(a){N.$comet_done=false;var b=Nitrogen.$lookup(Nitrogen.$current_id);b.$comet_start(a)};N.$comet_stop=function(){N.$comet_done=true};N.prototype.$comet_start=function(a){this.$do_comet(a)};N.prototype.$do_xhr_comet=function(postbackInfo){if(this.$comet_is_running){return}this.$comet_is_running=true;var params="postbackInfo="+postbackInfo+"&domState="+this.$dom_state;var n=this;var url=this.$url;$.ajax({url:url,type:"post",data:params,dataType:"text",success:function(data,textStatus){eval(data);n.$comet_is_running=false;if(!N.$comet_done){N.$comet_done=false;setTimeout("Nitrogen."+n.id+".$comet_start('"+postbackInfo+"');",0)}},error:function(xmlHttpRequest,textStatus,errorThrown){n.$comet_is_running=false;setTimeout("Nitrogen."+n.id+".$comet_start('"+postbackInfo+"');",5000)}})};N.$update=function(e,c){var b=jQuery(e);var a=b.attr("tagName");var d=b.attr("type");if(a&&d&&(a.match(/^INPUT$/i)&&(d.match(/^TEXT$/i)||d.match(/^RADIO$/i)))){b.attr("value",c)}else{if(a&&d&&(a.match(/^INPUT$/i)&&d.match(/^CHECKBOX$/i))){b.attr("checked",(c=="on"||c=="true")?"checked":"")}else{b.html(c).change()}}};N.prototype.$update=function(a){jQuery(this.$div).html(a)};N.$insert_top=function(b,a){jQuery(b).prepend(a).change()};N.$insert_bottom=function(b,a){jQuery(b).append(a).change()};N.$replace=function(b,a){jQuery(b).replaceWith(a)};N.prototype.$get_elements_to_serialize=function(){var g=["input","button","select","textarea","checkbox"];var d=new Array();for(var f=0;f<g.length;f++){var c=this.$div.getElementsByTagName(g[f]);for(var e=0;e<c.length;e++){var b=c[e].name;if(c[e].id.match(/^[0-9]+_.+$/)){continue}if(b!="domState"&&b!="postbackInfo"){d=d.concat(c[e])}}}$(".inputable").each(function(){if((this.tagName==="SPAN")===false){return}var a=document.createElement("input");a.type="text";a.name=this.id;a.value=this.innerHTML;d=d.concat(a)});return d};N.obj=function(a){var b=Nitrogen.$lookup(Nitrogen.$current_id);return b.obj(a)};N.prototype.obj=function(c){c=N.$normalize_partial_path(c);var a=document.getElementById(c);if(a){return a}var b=Nitrogen.$scan_elements(c,this.$div.childNodes);if(b==null){console.log("ERROR: '"+c+"' is not found!")}return b};N.is_obj_existing=function(a){var b=Nitrogen.$lookup(Nitrogen.$current_id);return b.is_obj_existing(a)};N.prototype.is_obj_existing=function(c){c=N.$normalize_partial_path(c);var a=document.getElementById(c);if(a){return a}var b=Nitrogen.$scan_elements(c,this.$div.childNodes);return b!=null};N.$normalize_partial_path=function(f){var g=Nitrogen.$current_path.split(".");var d=f.split(".");var b=new Array();for(var e=0;e<d.length;e++){var c=d[e];if(c=="me"){b=g}else{if(c=="parent"){b.pop()}else{b.push(c)}}}return b.join("__")};N.$scan_elements=function(e,d){if(!d){return}for(var b=0;b<d.length;b++){var a=d[b].id;if(a==undefined){continue}var f=a.indexOf(e);if(f==-1){continue}if(f!=0){f=a.indexOf("__"+e);if(f==-1){continue}if(a.match(/^(gbox_|gview_|load_|lui_|cb_|rs_)/)){continue}}if(a.match(new RegExp(e+"$"))){return d[b]}}for(var b=0;b<d.length;b++){var c=Nitrogen.$scan_elements(e,d[b].childNodes);if(c){return c}}return null};N.$observe_event=function(b,a,c){jQuery(b).bind(a,c)};N.is_halfwidth_kana=function(c){for(var b=0;b<c.length;b++){var a=c.charCodeAt(b);if(a<65381||a>65439){return false}}return true};N.is_fullwidth_kana=function(c){for(var b=0;b<c.length;b++){var a=c.charCodeAt(b);if(a<12448||(a>12543&&a<12784)||a>12799){return false}}return true};N.is_hiragana=function(c){for(var b=0;b<c.length;b++){var a=c.charCodeAt(b);if(a<12353||a>12447){return false}}return true};N.is_fullwidth_character=function(d){var c=(new FullwidthUnicode()).codes();for(var b=0;b<d.length;b++){var a=d.charCodeAt(b);if(!N.$binsearch(c,a)){return false}}return true};N.$mobile_loader_show=function(a){var e=a.theme||$.mobile.loader.prototype.options.theme,c=a.text||$.mobile.loader.prototype.options.text,d=a.textVisible||$.mobile.loader.prototype.options.textVisible,f=a.textonly,b=a.html||"";$.mobile.loading("show",{text:c,textVisible:d,theme:e,textonly:f,html:b.replace("\\","")})};N.$mobile_loader_hide=function(){$.mobile.loading("hide")};N.$mobile_collapsible=function(a,b){$(document).on("pagecreate",function(){var c=Nitrogen.$lookup(Nitrogen.$current_id);if(b!="nopostback"){jQuery(a).on("collapsibleexpand",function(d,e){c.$queue_event(this.id,b)});jQuery(a).on("collapsiblecollapse",function(d,e){c.$queue_event(this.id,b)})}})};N.$mobile_slider=function(c,a,b){var d=Nitrogen.$lookup(Nitrogen.$current_id);if(b=="start"){$(document).on("slidestart","#"+c.id,function(f,g){var e="#"+c.id+"_a";d.$queue_event(this.id,a,"value="+$(e).val())})}else{if(b=="stop"){$(document).on("slidestop","#"+c.id,function(f,g){var e="#"+c.id+"_a";d.$queue_event(this.id,a,"value="+$(e).val())})}}};N.$mobile_slider_range=function(c,a,b){var d=Nitrogen.$lookup(Nitrogen.$current_id);if(b=="start"){$(document).on("slidestart","#"+c.id,function(h,i){var f="#"+c.id+"_a";var e="#"+c.id+"_b";var g=[$(f).val(),$(e).val()];d.$queue_event(this.id,a,"values="+g)})}else{if(b=="stop"){$(document).on("slidestop","#"+c.id,function(h,i){var f="#"+c.id+"_a";var e="#"+c.id+"_b";var g=[$(f).val(),$(e).val()];d.$queue_event(this.id,a,"values="+g)})}}};N.$mobile_popup_open=function(b,a,c){if(c){a.positionTo="#"+c.id}jQuery(b).popup("open",a)};N.$mobile_popup_close=function(a){jQuery(a).popup("close")};N.$mobile_textbox_keyenter=function(b,a){var c=Nitrogen.$lookup(Nitrogen.$current_id);$(document).on("keypress","#"+b.id,function(d){if(d.which==13){c.$queue_event(b.id,a)}})};N.$mobile_textbox_keyenter_next=function(b,a){var c=Nitrogen.$lookup(Nitrogen.$current_id);$(document).on("keypress","#"+b.id,function(d){if(d.which==13){var e=Nitrogen.obj(a);if(e.focus){e.focus()}if(e.select){e.select()}if(e.click){e.click()}}})};N.$mobile_textbox_keyenter_postback_next=function(c,b,a){var d=Nitrogen.$lookup(Nitrogen.$current_id);$(document).on("keypress","#"+c.id,function(e){if(e.which==13){d.$queue_event(c.id,b);var f=Nitrogen.obj(a);if(f.focus){f.focus()}if(f.select){f.select()}if(f.click){f.click()}}})};N.$set_mobile_link_href=function(a,b){fullId=obj(b)===null?b:obj(b).id;eleLink=obj(a);jQuery(eleLink).prop("href","#"+fullId)};N.$disable_mobile_slider=function(a){sliderEle=$(obj(a));if(sliderEle.prop("data-role")==="rangeslider"){sliderEle.find("input[data-type='range']").rangeslider("disable")}else{sliderEle.find("input[data-type='range']").slider("disable")}};N.$enable_mobile_slider=function(a){sliderEle=$(obj(a));if(sliderEle.prop("data-role")==="rangeslider"){sliderEle.find("input[data-type='range']").rangeslider("enable")}else{sliderEle.find("input[data-type='range']").slider("enable")}};N.$refresh_mobile_element=function(b,a){switch(a){case"button":jQuery(b).button("refresh");break;case"checkbox":jQuery(b).checkboxradio("refresh");break;case"radio":jQuery(b).checkboxradio("refresh");break;case"radiogroup":$("#"+b.id+" :input").each(function(c,d){$(d).checkboxradio("refresh")});break;case"flipswitch":jQuery(b).flipswitch("refresh");break;case"rangeslider":jQuery(b).rangeslider("refresh");break;case"slider":$("#"+b.id+" :input").each(function(c,d){$(d).slider("refresh")});break;case"selectmenu":jQuery(b).selectmenu("refresh");break;case"textarea":jQuery(b).textinput("refresh");break;case"collapsible_set":jQuery(b).collapsibleset("refresh");break;case"filter":$("ul[data-input='#"+b.id+"']").filterable("refresh");break;case"list":jQuery(b).listview("refresh");break;case"toolbar":jQuery(b).toolbar("refresh");break;case"table":jQuery(b).table("rebuild");break;default:throw ("type undefined: "+a)}};N.$chartJsInit=function(a,c,b,e){var d=e;f(a,c,d);function f(m,l,j){var i=b;var k=l;h(m,j,k,i)}function h(n,j,k,m){var l=g(j,k,m);var i=document.getElementById(n).getContext("2d");new Chart(i,l)}function g(j,k,l){var i={type:j,data:k,options:l};return i}};Nitrogen.$event_loop();Nitrogen.Page({id:"page"});function baseURI(){if(N.$bu!==null&&N.$bu!=="/"){return N.$bu+"/"}return"/"};